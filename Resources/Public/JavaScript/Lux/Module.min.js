define(["jquery","TYPO3/CMS/Lux/Vendor/Chart.min"],function(t){"use strict";function e(t){var e=this;this.initialize=function(){a(),i()};var a=function(){for(var t=document.querySelectorAll("[data-lux-action-detail]"),e=0;e<t.length;e++){var a=t[e];a.addEventListener("click",function(){n(t,"lux-action-detail"),this.classList.add("lux-action-detail");var e=this.getAttribute("data-lux-action-detail");r(TYPO3.settings.ajaxUrls["/lux/detail"],{visitor:e},"showDetailCallback")})}};this.showDetailCallback=function(t){document.querySelector('[data-lux-container="detail"]').innerHTML=t.html;var e=document.querySelector('[data-lux-container="detailchart"]'),a=e.getContext("2d");new Chart(a,{type:"line",data:{datasets:[{label:e.getAttribute("data-chart-label"),data:e.getAttribute("data-chart-data").split(","),borderColor:"rgb(77, 231, 255)",lineTension:.5}],labels:e.getAttribute("data-chart-labels").split(",")},options:{legend:{display:!1,position:"right",labels:{fontSize:18}},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})};var i=function(){null!==document.querySelector(".t3js-datetimepicker")&&require(["TYPO3/CMS/Backend/DateTimePicker"],function(t){t.initialize()})},n=function(t,e){for(var a=0;a<t.length;a++)t[a].classList.remove(e)},r=function(t,a,i){if(void 0!==t&&""!==t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===this.readyState&&200===this.status&&e[i](JSON.parse(this.responseText))},n.open("POST",l(t,a),!0),n.send()}else console.log("No ajax URI given!")},l=function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t+=t.indexOf("?")!==-1?"&":"?",t+=a+"="+e[a]);return t}}t(document).ready(function(){var a=new e(t);a.initialize()})});