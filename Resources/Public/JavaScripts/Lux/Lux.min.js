function LuxMain(){"use strict";var t="luxId",n="";this.initialize=function(){b()&&(e(),v(),r(),u())};var e=function(){n=y()},r=function(){d()&&_(p(),c())},u=function(){for(var t=document.querySelectorAll("input, textarea, select, radio, check"),n=0;n<t.length;n++){var e=t[n];"password"!==e.type&&a(e)&&e.addEventListener("change",function(){i(this)})}},i=function(t){var n=o(t),e=t.value;_(h(),{"tx_lux_fe[idCookie]":y(),"tx_lux_fe[key]":n,"tx_lux_fe[value]":e})},a=function(t){return""!==o(t)},o=function(t){var n="",e=t.name,r=l();for(var u in r)if(r.hasOwnProperty(u))for(var i=0;i<r[u].length;i++)f(e,r[u][i])&&(n=u);return n},f=function(t,n){if(n.indexOf("*")!==-1){n=n.replace("*","");var e=t.indexOf(n)!==-1}else e=t===n;return e},l=function(){var t={};try{t=JSON.parse(window.luxFieldMappingConfiguration)}catch(n){console.log("Lux: No fieldmapping configuration given.")}return t},c=function(){return{"tx_lux_fe[idCookie]":y(),"tx_lux_fe[pageUid]":g(),"tx_lux_fe[referrer]":s(),"tx_lux_fe[languageUid]":x()}},d=function(){var t=!1,n=w();if(null!==n&&n.hasAttribute("data-lux-pagetracking")){var e=n.getAttribute("data-lux-pagetracking");t="1"===e}return t},g=function(){var t=0,n=w();if(null!==n&&n.hasAttribute("data-lux-pageuid")){var e=n.getAttribute("data-lux-pageuid");t=parseInt(e)}return t},s=function(){return encodeURIComponent(document.referrer)},x=function(){var t=0,n=w();if(null!==n&&n.hasAttribute("data-lux-languageuid")){var e=n.getAttribute("data-lux-languageuid");t=parseInt(e)}return t},v=function(){""===n&&(n=A(32),k(t,n))},p=function(){var t=w();return null!==t?t.getAttribute("data-lux-pagerequesturi"):""},h=function(){var t=w();return null!==t?t.getAttribute("data-lux-fieldlisteninguri"):""},_=function(t,n){if(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){JSON.parse(this.responseText)}},e.open("POST",m(t,n),!0),e.send()}else console.log("No ajax URI given!")},m=function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t+=t.indexOf("?")!==-1?"&":"?",t+=e+"="+n[e]);return t},b=function(){return null!==w()},w=function(){return document.getElementById("lux_container")},A=function(t){for(var n="",e="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},y=function(){return O(t)},k=function(t,n){var e=new Date,r=e.getTime();r+=31536e7,e.setTime(r),document.cookie=t+"="+n+"; expires="+e.toUTCString()+"; path=/"},O=function(t){for(var n=t+"=",e=document.cookie.split(";"),r=0;r<e.length;r++){for(var u=e[r];" "===u.charAt(0);)u=u.substring(1);if(0===u.indexOf(n))return u.substring(n.length,u.length)}return""}}var Lux=new window.LuxMain;Lux.initialize();