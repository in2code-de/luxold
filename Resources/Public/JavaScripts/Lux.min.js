function LuxMain(){"use strict";var t="luxId",n="";this.initialize=function(){_()&&(e(),d(),r(),i())};var e=function(){n=w()},r=function(){c()&&p(x(),f())},i=function(){for(var t=document.querySelectorAll("input, textarea, select, radio, check"),n=0;n<t.length;n++){var e=t[n];"password"!==e.type&&a(e)&&e.addEventListener("change",function(){u(this)})}},u=function(t){var n=o(t),e=t.value;p(v(),{"tx_lux_fe[idCookie]":w(),"tx_lux_fe[key]":n,"tx_lux_fe[value]":e})},a=function(t){return""!==o(t)},o=function(t){var n="",e=t.name,r=l();for(var i in r)if(r.hasOwnProperty(i))for(var u=0;u<r[i].length;u++){var a=r[i][u].replace("*","");e.indexOf(a)!==-1&&(n=i)}return n},l=function(){var t={};try{t=JSON.parse(window.luxFieldMappingConfiguration)}catch(n){console.log("Lux: No fieldmapping configuration given.")}return t},f=function(){return{"tx_lux_fe[idCookie]":w(),"tx_lux_fe[pageUid]":g(),"tx_lux_fe[languageUid]":s()}},c=function(){var t=!1,n=b();if(null!==n&&n.hasAttribute("data-lux-pagetracking")){var e=n.getAttribute("data-lux-pagetracking");t="1"===e}return t},g=function(){var t=0,n=b();if(null!==n&&n.hasAttribute("data-lux-pageuid")){var e=n.getAttribute("data-lux-pageuid");t=parseInt(e)}return t},s=function(){var t=0,n=b();if(null!==n&&n.hasAttribute("data-lux-languageuid")){var e=n.getAttribute("data-lux-languageuid");t=parseInt(e)}return t},d=function(){""===n&&(n=m(32),A(t,n))},x=function(){var t=b();return null!==t?t.getAttribute("data-lux-pagerequesturi"):""},v=function(){var t=b();return null!==t?t.getAttribute("data-lux-fieldlisteninguri"):""},p=function(t,n){if(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){JSON.parse(this.responseText)}},e.open("POST",h(t,n),!0),e.send()}else console.log("No ajax URI given!")},h=function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t+=t.indexOf("?")!==-1?"&":"?",t+=e+"="+n[e]);return t},_=function(){return null!==b()},b=function(){return document.getElementById("lux_container")},m=function(t){for(var n="",e="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},w=function(){return y(t)},A=function(t,n){var e=new Date,r=e.getTime();r+=31536e7,e.setTime(r),document.cookie=t+"="+n+"; expires="+e.toUTCString()+"; path=/"},y=function(t){for(var n=t+"=",e=document.cookie.split(";"),r=0;r<e.length;r++){for(var i=e[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return""}}var Lux=new window.LuxMain;Lux.initialize();